# ü§ñ INSTRUKSI LENGKAP UNTUK CLAUDE CODE
## ZYN TRADE SYSTEM - FIX FITUR WAJIB

**Tanggal:** 18 Desember 2024  
**Sumber:** Analisis 15 File Plan vs Website Existing  
**Fokus:** HANYA FITUR WAJIB (Critical)

---

# üìã RINGKASAN EKSEKUTIF

## Apa yang Harus Dikerjakan?

Website ZYN Trade System sudah **82% jadi**. Backend sudah lengkap support 5 mode schedule, tapi **UI-nya belum lengkap**. Kamu harus menambahkan UI dan beberapa logic yang kurang.

## File yang Perlu Diubah

| File | Lokasi | Perubahan |
|------|--------|-----------|
| `settings.php` | Root folder | Tambah 2 mode schedule + UI |
| `admin/my-robot.php` | /admin/ | Tambah dropdown 5 mode + UI + handler |
| `includes/functions.php` | /includes/ | Tambah function resume behavior |
| `dashboard.php` | Root folder | Tambah auto-pause modal |
| `api/check-autopause.php` | /api/ | Update response format |
| `database/zyn_trade.sql` | /database/ | Tambah kolom (jika belum ada) |
| `assets/css/style.css` | /assets/css/ | Tambah CSS untuk schedule UI |

## Estimasi Waktu
- **Total: 2-3 jam**
- 20 perubahan dalam 4 fase

---

# üî¥ FASE 1: UI SCHEDULE MODE (5 Perubahan)

## Konteks
Backend di `config.php` dan `functions.php` sudah support 5 mode schedule:
1. `auto_24h` - 24 jam otomatis
2. `best_hours` - Jam terbaik (14:00-22:00)
3. `custom_single` - Custom 1 range waktu
4. `multi_session` - Beberapa sesi per hari
5. `per_day` - Jadwal berbeda Senin-Jumat

**MASALAH:** UI hanya menampilkan 2-3 mode. Harus ditambahkan sisanya.

---

## PERUBAHAN 1.1: Update settings.php - Array Schedule Modes

**File:** `settings.php`  
**Lokasi:** Sekitar line 80-90 (cari `$scheduleModes`)

**CARI:**
```php
$scheduleModes = [
    'auto_24h' => ['name' => '24 Jam Otomatis', 'desc' => 'Robot aktif sepanjang hari'],
    'best_hours' => ['name' => 'Jam Terbaik', 'desc' => '14:00 - 22:00 WIB (London & NY session)'],
    'custom_single' => ['name' => 'Custom Single', 'desc' => 'Atur jam mulai dan selesai sendiri']
];
```

**GANTI DENGAN:**
```php
$scheduleModes = [
    'auto_24h' => [
        'name' => '24 Jam Otomatis', 
        'desc' => 'Robot aktif sepanjang hari (kecuali weekend)', 
        'icon' => 'fa-clock'
    ],
    'best_hours' => [
        'name' => 'Jam Terbaik', 
        'desc' => '14:00 - 22:00 WIB (London & NY session)', 
        'icon' => 'fa-star'
    ],
    'custom_single' => [
        'name' => 'Custom Single', 
        'desc' => 'Tentukan 1 range waktu trading sendiri', 
        'icon' => 'fa-sliders-h'
    ],
    'multi_session' => [
        'name' => 'Multi-Sesi', 
        'desc' => 'Beberapa sesi trading per hari (max 10 sesi)', 
        'icon' => 'fa-layer-group'
    ],
    'per_day' => [
        'name' => 'Per Hari Berbeda', 
        'desc' => 'Jadwal berbeda untuk setiap hari Senin-Jumat', 
        'icon' => 'fa-calendar-alt'
    ]
];
```

---

## PERUBAHAN 1.2: Update admin/my-robot.php - Dropdown Schedule

**File:** `admin/my-robot.php`  
**Lokasi:** Sekitar line 285-295 (cari `<select name="schedule_mode"`)

**CARI:**
```html
<select name="schedule_mode" class="form-select">
    <option value="auto_24h" <?php echo $robotSettings['schedule_mode'] === 'auto_24h' ? 'selected' : ''; ?>>24/7 Auto</option>
    <option value="best_hours" <?php echo $robotSettings['schedule_mode'] === 'best_hours' ? 'selected' : ''; ?>>Best Hours Only</option>
</select>
```

**GANTI DENGAN:**
```html
<div class="mb-3">
    <label class="form-label">
        <i class="fas fa-clock text-primary me-2"></i>Mode Jadwal Trading
    </label>
    <select name="schedule_mode" class="form-select bg-dark text-light" id="scheduleMode" onchange="toggleScheduleUI()">
        <option value="auto_24h" <?php echo ($robotSettings['schedule_mode'] ?? 'auto_24h') === 'auto_24h' ? 'selected' : ''; ?>>
            üïê 24/7 Auto - Robot aktif terus (kecuali weekend)
        </option>
        <option value="best_hours" <?php echo ($robotSettings['schedule_mode'] ?? '') === 'best_hours' ? 'selected' : ''; ?>>
            ‚≠ê Best Hours - 14:00-22:00 WIB (London & NY)
        </option>
        <option value="custom_single" <?php echo ($robotSettings['schedule_mode'] ?? '') === 'custom_single' ? 'selected' : ''; ?>>
            ‚è∞ Custom Single - Tentukan 1 range waktu sendiri
        </option>
        <option value="multi_session" <?php echo ($robotSettings['schedule_mode'] ?? '') === 'multi_session' ? 'selected' : ''; ?>>
            üìä Multi-Sesi - Beberapa sesi per hari
        </option>
        <option value="per_day" <?php echo ($robotSettings['schedule_mode'] ?? '') === 'per_day' ? 'selected' : ''; ?>>
            üìÖ Per Hari - Jadwal berbeda Senin-Jumat
        </option>
    </select>
    <small class="text-muted mt-1 d-block">
        <i class="fas fa-info-circle me-1"></i>Sabtu & Minggu otomatis OFF
    </small>
</div>
```

---

## PERUBAHAN 1.3: Tambah UI Custom Single Mode

**File:** `admin/my-robot.php`  
**Lokasi:** SETELAH select schedule_mode yang baru ditambah

**TAMBAHKAN:**
```html
<!-- ========== UI: Custom Single Time Range ========== -->
<div id="customSingleUI" class="schedule-ui mt-3" style="display:none;">
    <div class="card bg-dark border-info">
        <div class="card-header bg-info bg-opacity-25 py-2">
            <i class="fas fa-clock me-2"></i>Custom Time Range
        </div>
        <div class="card-body">
            <div class="row g-3">
                <div class="col-6">
                    <label class="form-label small text-muted">Jam Mulai</label>
                    <input type="time" 
                           name="custom_start" 
                           class="form-control bg-dark text-light border-secondary" 
                           value="<?php echo htmlspecialchars($robotSettings['schedule_start_time'] ?? '08:00'); ?>">
                </div>
                <div class="col-6">
                    <label class="form-label small text-muted">Jam Selesai</label>
                    <input type="time" 
                           name="custom_end" 
                           class="form-control bg-dark text-light border-secondary" 
                           value="<?php echo htmlspecialchars($robotSettings['schedule_end_time'] ?? '22:00'); ?>">
                </div>
            </div>
            <div class="alert alert-info bg-info bg-opacity-10 border-info mt-3 mb-0 py-2">
                <small><i class="fas fa-lightbulb me-1"></i>Robot hanya aktif dalam range waktu ini setiap hari kerja</small>
            </div>
        </div>
    </div>
</div>
```

---

## PERUBAHAN 1.4: Tambah UI Multi-Session Mode

**File:** `admin/my-robot.php`  
**Lokasi:** SETELAH customSingleUI

**TAMBAHKAN:**
```html
<!-- ========== UI: Multi-Session Manager ========== -->
<div id="multiSessionUI" class="schedule-ui mt-3" style="display:none;">
    <div class="card bg-dark border-primary">
        <div class="card-header bg-primary bg-opacity-25 py-2 d-flex justify-content-between align-items-center">
            <span><i class="fas fa-layer-group me-2"></i>Multi-Sesi Trading</span>
            <button type="button" class="btn btn-sm btn-primary" onclick="addSession()">
                <i class="fas fa-plus me-1"></i>Tambah Sesi
            </button>
        </div>
        <div class="card-body">
            <div id="sessionContainer">
                <!-- Sessions will be rendered here by JavaScript -->
                <div class="text-center text-muted py-3">
                    <i class="fas fa-info-circle me-1"></i>
                    Klik "Tambah Sesi" untuk menambah sesi trading.<br>
                    <small>Maksimal 10 sesi per hari.</small>
                </div>
            </div>
            <input type="hidden" name="sessions_json" id="sessionsJson" 
                   value="<?php echo htmlspecialchars($robotSettings['schedule_sessions'] ?? '[]'); ?>">
        </div>
        <div class="card-footer bg-transparent border-secondary py-2">
            <small class="text-warning">
                <i class="fas fa-exclamation-triangle me-1"></i>
                Pastikan sesi tidak saling overlap!
            </small>
        </div>
    </div>
</div>
```

---

## PERUBAHAN 1.5: Tambah UI Per-Day Schedule Mode

**File:** `admin/my-robot.php`  
**Lokasi:** SETELAH multiSessionUI

**TAMBAHKAN:**
```html
<!-- ========== UI: Per-Day Schedule (Senin-Jumat) ========== -->
<div id="perDayUI" class="schedule-ui mt-3" style="display:none;">
    <div class="card bg-dark border-success">
        <div class="card-header bg-success bg-opacity-25 py-2 d-flex justify-content-between align-items-center">
            <span><i class="fas fa-calendar-alt me-2"></i>Jadwal Per Hari</span>
            <button type="button" class="btn btn-sm btn-outline-light" onclick="copyMondayToAll()">
                <i class="fas fa-copy me-1"></i>Copy Senin ke Semua
            </button>
        </div>
        <div class="card-body p-2">
            <?php 
            $days = [
                'monday' => ['name' => 'Senin', 'icon' => 'M'],
                'tuesday' => ['name' => 'Selasa', 'icon' => 'S'], 
                'wednesday' => ['name' => 'Rabu', 'icon' => 'R'],
                'thursday' => ['name' => 'Kamis', 'icon' => 'K'],
                'friday' => ['name' => 'Jumat', 'icon' => 'J']
            ];
            $perDayData = json_decode($robotSettings['schedule_per_day'] ?? '{}', true);
            
            foreach ($days as $dayKey => $dayInfo): 
                $daySettings = $perDayData[$dayKey] ?? ['enabled' => true, 'start' => '08:00', 'end' => '22:00'];
            ?>
            <div class="d-flex align-items-center gap-2 p-2 mb-1 rounded <?php echo $daySettings['enabled'] ? 'bg-success bg-opacity-10' : 'bg-secondary bg-opacity-25'; ?>">
                <!-- Checkbox Enable -->
                <div class="form-check mb-0" style="min-width: 30px;">
                    <input type="checkbox" 
                           class="form-check-input" 
                           name="<?php echo $dayKey; ?>_enabled" 
                           id="<?php echo $dayKey; ?>_enabled"
                           <?php echo ($daySettings['enabled'] ?? true) ? 'checked' : ''; ?>
                           onchange="toggleDayRow('<?php echo $dayKey; ?>')">
                </div>
                
                <!-- Day Name -->
                <div class="fw-medium text-light" style="min-width: 70px;">
                    <?php echo $dayInfo['name']; ?>
                </div>
                
                <!-- Time Inputs -->
                <input type="time" 
                       name="<?php echo $dayKey; ?>_start" 
                       class="form-control form-control-sm bg-dark text-light border-secondary" 
                       style="width: 110px;"
                       value="<?php echo htmlspecialchars($daySettings['start'] ?? '08:00'); ?>">
                
                <span class="text-muted">-</span>
                
                <input type="time" 
                       name="<?php echo $dayKey; ?>_end" 
                       class="form-control form-control-sm bg-dark text-light border-secondary" 
                       style="width: 110px;"
                       value="<?php echo htmlspecialchars($daySettings['end'] ?? '22:00'); ?>">
                
                <!-- Status Badge -->
                <span class="badge <?php echo ($daySettings['enabled'] ?? true) ? 'bg-success' : 'bg-secondary'; ?> ms-auto" 
                      id="<?php echo $dayKey; ?>_badge">
                    <?php echo ($daySettings['enabled'] ?? true) ? 'AKTIF' : 'OFF'; ?>
                </span>
            </div>
            <?php endforeach; ?>
            
            <!-- Weekend Info -->
            <div class="d-flex align-items-center gap-2 p-2 rounded bg-danger bg-opacity-10 mt-2">
                <i class="fas fa-ban text-danger"></i>
                <span class="text-muted">Sabtu & Minggu</span>
                <span class="badge bg-danger ms-auto">AUTO OFF</span>
            </div>
        </div>
    </div>
</div>

<input type="hidden" name="weekly_schedule_json" id="weeklyScheduleJson">
```

---

# üîµ FASE 2: JAVASCRIPT FUNCTIONS (5 Perubahan)

## PERUBAHAN 2.1: Tambah toggleScheduleUI()

**File:** `admin/my-robot.php`  
**Lokasi:** Di bagian `<script>` sebelum `</body>`

**TAMBAHKAN:**
```javascript
<script>
// ================================================================
// SCHEDULE UI MANAGER - ZYN TRADE SYSTEM
// ================================================================

/**
 * Toggle visibility of schedule UI panels
 * Called when user changes schedule_mode dropdown
 */
function toggleScheduleUI() {
    // Hide all schedule UI panels
    const panels = document.querySelectorAll('.schedule-ui');
    panels.forEach(panel => {
        panel.style.display = 'none';
    });
    
    // Get selected mode
    const mode = document.getElementById('scheduleMode').value;
    
    // Show corresponding panel
    switch(mode) {
        case 'custom_single':
            document.getElementById('customSingleUI').style.display = 'block';
            break;
        case 'multi_session':
            document.getElementById('multiSessionUI').style.display = 'block';
            loadExistingSessions();
            renderSessions();
            break;
        case 'per_day':
            document.getElementById('perDayUI').style.display = 'block';
            break;
        // auto_24h and best_hours don't need extra UI
    }
}
</script>
```

---

## PERUBAHAN 2.2: Tambah Multi-Session Manager Functions

**File:** `admin/my-robot.php`  
**Lokasi:** Di dalam tag `<script>` yang sama

**TAMBAHKAN (setelah toggleScheduleUI):**
```javascript
// ================================================================
// MULTI-SESSION MANAGER
// ================================================================

// Store sessions data
let sessions = [];

/**
 * Load existing sessions from hidden input
 */
function loadExistingSessions() {
    const existingData = document.getElementById('sessionsJson').value;
    if (existingData && existingData !== '[]') {
        try {
            sessions = JSON.parse(existingData);
        } catch(e) {
            console.error('Error parsing sessions:', e);
            sessions = [];
        }
    }
}

/**
 * Add a new trading session
 */
function addSession() {
    if (sessions.length >= 10) {
        alert('‚ö†Ô∏è Maksimal 10 sesi trading per hari!');
        return;
    }
    
    // Calculate default times for new session
    let defaultStart = '09:00';
    let defaultEnd = '12:00';
    
    if (sessions.length > 0) {
        const lastSession = sessions[sessions.length - 1];
        const lastEndHour = parseInt(lastSession.end.split(':')[0]);
        defaultStart = String(Math.min(lastEndHour + 1, 20)).padStart(2, '0') + ':00';
        defaultEnd = String(Math.min(lastEndHour + 4, 23)).padStart(2, '0') + ':00';
    }
    
    sessions.push({ 
        start: defaultStart, 
        end: defaultEnd,
        id: Date.now() // Unique ID for tracking
    });
    
    renderSessions();
    updateSessionsJson();
}

/**
 * Remove a session by index
 */
function removeSession(index) {
    if (sessions.length === 1) {
        alert('‚ö†Ô∏è Minimal harus ada 1 sesi!');
        return;
    }
    
    sessions.splice(index, 1);
    renderSessions();
    updateSessionsJson();
}

/**
 * Update session time value
 */
function updateSessionTime(index, field, value) {
    if (sessions[index]) {
        sessions[index][field] = value;
        updateSessionsJson();
        validateSessionOverlap();
    }
}
```

---

## PERUBAHAN 2.3: Tambah renderSessions()

**File:** `admin/my-robot.php`  
**Lokasi:** Di dalam tag `<script>` yang sama

**TAMBAHKAN:**
```javascript
/**
 * Render all sessions to the container
 */
function renderSessions() {
    const container = document.getElementById('sessionContainer');
    
    if (sessions.length === 0) {
        container.innerHTML = `
            <div class="text-center text-muted py-3">
                <i class="fas fa-info-circle me-1"></i>
                Klik "Tambah Sesi" untuk menambah sesi trading.<br>
                <small>Maksimal 10 sesi per hari.</small>
            </div>
        `;
        return;
    }
    
    let html = '';
    
    sessions.forEach((session, index) => {
        html += `
            <div class="d-flex align-items-center gap-2 mb-2 p-2 rounded" 
                 style="background: rgba(0, 168, 204, 0.1); border: 1px solid rgba(0, 168, 204, 0.3);">
                <span class="badge bg-primary">Sesi ${index + 1}</span>
                <input type="time" 
                       class="form-control form-control-sm bg-dark text-light border-secondary" 
                       style="width: 100px;"
                       value="${session.start}"
                       onchange="updateSessionTime(${index}, 'start', this.value)">
                <span class="text-muted">sampai</span>
                <input type="time" 
                       class="form-control form-control-sm bg-dark text-light border-secondary" 
                       style="width: 100px;"
                       value="${session.end}"
                       onchange="updateSessionTime(${index}, 'end', this.value)">
                <button type="button" 
                        class="btn btn-sm btn-outline-danger ms-auto" 
                        onclick="removeSession(${index})"
                        title="Hapus sesi ini">
                    <i class="fas fa-trash"></i>
                </button>
            </div>
        `;
    });
    
    // Summary
    html += `
        <div class="d-flex justify-content-between align-items-center mt-3 pt-2 border-top border-secondary">
            <small class="text-info">
                <i class="fas fa-clock me-1"></i>Total: ${sessions.length} sesi aktif
            </small>
            <small class="text-muted">
                Max: 10 sesi
            </small>
        </div>
    `;
    
    container.innerHTML = html;
}

/**
 * Update hidden input with sessions JSON
 */
function updateSessionsJson() {
    const cleanSessions = sessions.map(s => ({
        start: s.start,
        end: s.end
    }));
    document.getElementById('sessionsJson').value = JSON.stringify(cleanSessions);
}

/**
 * Validate sessions for overlaps
 */
function validateSessionOverlap() {
    if (sessions.length < 2) return true;
    
    const sorted = [...sessions].sort((a, b) => a.start.localeCompare(b.start));
    
    for (let i = 0; i < sorted.length - 1; i++) {
        if (sorted[i].end > sorted[i + 1].start) {
            console.warn(`Overlap detected: Session ${i + 1} and ${i + 2}`);
            // Optional: show visual warning
            return false;
        }
    }
    return true;
}
```

---

## PERUBAHAN 2.4: Tambah Per-Day Functions

**File:** `admin/my-robot.php`  
**Lokasi:** Di dalam tag `<script>` yang sama

**TAMBAHKAN:**
```javascript
// ================================================================
// PER-DAY SCHEDULE FUNCTIONS
// ================================================================

/**
 * Copy Monday's schedule to all other days
 */
function copyMondayToAll() {
    const mondayEnabled = document.getElementById('monday_enabled').checked;
    const mondayStart = document.querySelector('[name="monday_start"]').value;
    const mondayEnd = document.querySelector('[name="monday_end"]').value;
    
    const days = ['tuesday', 'wednesday', 'thursday', 'friday'];
    
    days.forEach(day => {
        document.getElementById(`${day}_enabled`).checked = mondayEnabled;
        document.querySelector(`[name="${day}_start"]`).value = mondayStart;
        document.querySelector(`[name="${day}_end"]`).value = mondayEnd;
        toggleDayRow(day);
    });
    
    // Visual feedback
    showToast('‚úÖ Jadwal Senin berhasil di-copy ke semua hari!', 'success');
}

/**
 * Toggle day row appearance based on checkbox
 */
function toggleDayRow(dayKey) {
    const checkbox = document.getElementById(`${dayKey}_enabled`);
    const badge = document.getElementById(`${dayKey}_badge`);
    const row = checkbox.closest('.d-flex');
    
    if (checkbox.checked) {
        row.classList.remove('bg-secondary', 'bg-opacity-25');
        row.classList.add('bg-success', 'bg-opacity-10');
        badge.classList.remove('bg-secondary');
        badge.classList.add('bg-success');
        badge.textContent = 'AKTIF';
    } else {
        row.classList.remove('bg-success', 'bg-opacity-10');
        row.classList.add('bg-secondary', 'bg-opacity-25');
        badge.classList.remove('bg-success');
        badge.classList.add('bg-secondary');
        badge.textContent = 'OFF';
    }
}

/**
 * Collect per-day schedule data before form submit
 */
function collectPerDayData() {
    const days = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday'];
    const schedule = {};
    
    days.forEach(day => {
        schedule[day] = {
            enabled: document.getElementById(`${day}_enabled`)?.checked ?? true,
            start: document.querySelector(`[name="${day}_start"]`)?.value ?? '08:00',
            end: document.querySelector(`[name="${day}_end"]`)?.value ?? '22:00'
        };
    });
    
    document.getElementById('weeklyScheduleJson').value = JSON.stringify(schedule);
}
```

---

## PERUBAHAN 2.5: Tambah Initialization & Form Handler

**File:** `admin/my-robot.php`  
**Lokasi:** Di dalam tag `<script>` yang sama (bagian akhir)

**TAMBAHKAN:**
```javascript
// ================================================================
// INITIALIZATION & FORM HANDLING
// ================================================================

/**
 * Simple toast notification
 */
function showToast(message, type = 'info') {
    // Create toast element
    const toast = document.createElement('div');
    toast.className = `alert alert-${type === 'success' ? 'success' : 'info'} position-fixed`;
    toast.style.cssText = 'top: 20px; right: 20px; z-index: 9999; min-width: 300px;';
    toast.innerHTML = message;
    
    document.body.appendChild(toast);
    
    // Remove after 3 seconds
    setTimeout(() => {
        toast.remove();
    }, 3000);
}

/**
 * Initialize on page load
 */
document.addEventListener('DOMContentLoaded', function() {
    // Initialize schedule UI based on current mode
    if (document.getElementById('scheduleMode')) {
        toggleScheduleUI();
    }
    
    // Form submit handler
    const form = document.querySelector('form');
    if (form) {
        form.addEventListener('submit', function(e) {
            const mode = document.getElementById('scheduleMode')?.value;
            
            // Validate multi_session
            if (mode === 'multi_session') {
                if (sessions.length === 0) {
                    e.preventDefault();
                    alert('‚ö†Ô∏è Tambahkan minimal 1 sesi trading untuk mode Multi-Sesi!');
                    return false;
                }
                if (!validateSessionOverlap()) {
                    if (!confirm('‚ö†Ô∏è Ada sesi yang overlap. Lanjutkan simpan?')) {
                        e.preventDefault();
                        return false;
                    }
                }
            }
            
            // Collect per-day data
            if (mode === 'per_day') {
                collectPerDayData();
            }
            
            return true;
        });
    }
});
</script>
```

---

# üü¢ FASE 3: BACKEND HANDLER & RESUME BEHAVIOR (5 Perubahan)

## PERUBAHAN 3.1: Update POST Handler Variables

**File:** `admin/my-robot.php`  
**Lokasi:** Bagian awal file, dalam `if ($_SERVER['REQUEST_METHOD'] === 'POST')`

**CARI bagian POST handling, lalu UPDATE untuk include variable baru:**

```php
if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    try {
        // === EXISTING FIELDS ===
        $strategies = $_POST['strategies'] ?? [];
        $market = $_POST['market'] ?? 'EUR/USD';
        $timeframe = $_POST['timeframe'] ?? '15M';
        $tradeAmount = floatval($_POST['trade_amount'] ?? 10000);
        $tpTarget = floatval($_POST['take_profit_target'] ?? 50);
        $mlLimit = floatval($_POST['max_loss_limit'] ?? 25);
        $moneyManagement = $_POST['money_management_type'] ?? 'flat';
        
        // === SCHEDULE FIELDS (NEW) ===
        $scheduleMode = $_POST['schedule_mode'] ?? 'auto_24h';
        $customStart = !empty($_POST['custom_start']) ? $_POST['custom_start'] : null;
        $customEnd = !empty($_POST['custom_end']) ? $_POST['custom_end'] : null;
        $sessionsJson = $_POST['sessions_json'] ?? '[]';
        
        // Collect per-day schedule
        $weeklySchedule = [];
        $days = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday'];
        foreach ($days as $day) {
            $weeklySchedule[$day] = [
                'enabled' => isset($_POST[$day . '_enabled']),
                'start' => $_POST[$day . '_start'] ?? '08:00',
                'end' => $_POST[$day . '_end'] ?? '22:00'
            ];
        }
        $weeklyScheduleJson = json_encode($weeklySchedule);
        
        // === RESUME BEHAVIOR (NEW) ===
        $resumeBehavior = $_POST['resume_behavior'] ?? 'next_day';
        
        // ... continue to UPDATE query ...
```

---

## PERUBAHAN 3.2: Update SQL Query

**File:** `admin/my-robot.php`  
**Lokasi:** Di dalam POST handler, bagian UPDATE query

**UPDATE query menjadi:**
```php
        // Update robot settings in database
        $stmt = $pdo->prepare("
            UPDATE robot_settings SET
                strategies = :strategies,
                market = :market,
                timeframe = :timeframe,
                trade_amount = :trade_amount,
                take_profit_target = :tp_target,
                max_loss_limit = :ml_limit,
                money_management_type = :money_mgmt,
                schedule_mode = :schedule_mode,
                schedule_start_time = :custom_start,
                schedule_end_time = :custom_end,
                schedule_sessions = :sessions_json,
                schedule_per_day = :weekly_json,
                resume_behavior = :resume_behavior,
                updated_at = NOW()
            WHERE user_id = :user_id
        ");
        
        $stmt->execute([
            ':strategies' => json_encode($strategies),
            ':market' => $market,
            ':timeframe' => $timeframe,
            ':trade_amount' => $tradeAmount,
            ':tp_target' => $tpTarget,
            ':ml_limit' => $mlLimit,
            ':money_mgmt' => $moneyManagement,
            ':schedule_mode' => $scheduleMode,
            ':custom_start' => $customStart,
            ':custom_end' => $customEnd,
            ':sessions_json' => $sessionsJson,
            ':weekly_json' => $weeklyScheduleJson,
            ':resume_behavior' => $resumeBehavior,
            ':user_id' => $userId
        ]);
        
        $_SESSION['flash_message'] = '‚úÖ Pengaturan robot berhasil disimpan!';
        $_SESSION['flash_type'] = 'success';
        
    } catch (Exception $e) {
        $_SESSION['flash_message'] = '‚ùå Gagal menyimpan: ' . $e->getMessage();
        $_SESSION['flash_type'] = 'danger';
    }
    
    // Redirect to prevent form resubmission
    header('Location: ' . $_SERVER['PHP_SELF']);
    exit;
}
```

---

## PERUBAHAN 3.3: Tambah UI Resume Behavior

**File:** `admin/my-robot.php`  
**Lokasi:** SETELAH input Max Loss Limit, SEBELUM tombol Submit

**TAMBAHKAN:**
```html
<!-- ========== RESUME BEHAVIOR SECTION ========== -->
<div class="mt-4 pt-3 border-top border-secondary">
    <label class="form-label">
        <i class="fas fa-redo text-info me-2"></i>
        Setelah Auto-Pause, Robot Aktif Lagi:
    </label>
    <select name="resume_behavior" class="form-select bg-dark text-light border-secondary">
        <option value="next_session" <?php echo ($robotSettings['resume_behavior'] ?? '') === 'next_session' ? 'selected' : ''; ?>>
            üîÑ Sesi Berikutnya - Aktif di sesi trading berikutnya (hari sama)
        </option>
        <option value="next_day" <?php echo ($robotSettings['resume_behavior'] ?? 'next_day') === 'next_day' ? 'selected' : ''; ?>>
            ‚≠ê Besok (Reset Harian) - Aktif besok dengan PnL reset [REKOMENDASI]
        </option>
        <option value="manual_only" <?php echo ($robotSettings['resume_behavior'] ?? '') === 'manual_only' ? 'selected' : ''; ?>>
            üîí Manual Only - OFF sampai klik Resume manual
        </option>
    </select>
    <small class="text-muted mt-1 d-block">
        <i class="fas fa-info-circle me-1"></i>
        Tentukan kapan robot aktif lagi setelah Take Profit atau Max Loss tercapai
    </small>
    
    <!-- Explanation Cards -->
    <div class="row mt-3 g-2">
        <div class="col-md-4">
            <div class="card bg-info bg-opacity-10 border-info h-100">
                <div class="card-body p-2">
                    <small class="text-info fw-bold d-block">üîÑ Sesi Berikutnya</small>
                    <small class="text-muted">Robot pause hanya untuk sesi saat ini, aktif lagi di sesi berikutnya hari yang sama</small>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card bg-success bg-opacity-10 border-success h-100">
                <div class="card-body p-2">
                    <small class="text-success fw-bold d-block">‚≠ê Besok (Reset)</small>
                    <small class="text-muted">Robot OFF sisa hari ini, aktif besok dengan Daily PnL reset ke 0</small>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card bg-warning bg-opacity-10 border-warning h-100">
                <div class="card-body p-2">
                    <small class="text-warning fw-bold d-block">üîí Manual Only</small>
                    <small class="text-muted">Robot OFF total sampai Anda klik tombol RESUME secara manual</small>
                </div>
            </div>
        </div>
    </div>
</div>
```

---

## PERUBAHAN 3.4: Tambah Database Column (Jika Belum Ada)

**File:** `database/zyn_trade.sql` ATAU jalankan SQL langsung

**JALANKAN SQL INI:**
```sql
-- ================================================================
-- DATABASE MIGRATION: ZYN TRADE SYSTEM
-- Tambah kolom untuk schedule dan resume behavior
-- ================================================================

-- Tambah kolom resume_behavior
ALTER TABLE robot_settings 
ADD COLUMN IF NOT EXISTS resume_behavior 
ENUM('next_session', 'next_day', 'manual_only') 
DEFAULT 'next_day'
AFTER max_loss_limit;

-- Tambah kolom schedule_sessions untuk multi-session mode
ALTER TABLE robot_settings 
ADD COLUMN IF NOT EXISTS schedule_sessions 
JSON DEFAULT NULL
AFTER schedule_end_time;

-- Tambah kolom schedule_per_day untuk per-day mode
ALTER TABLE robot_settings 
ADD COLUMN IF NOT EXISTS schedule_per_day 
JSON DEFAULT NULL
AFTER schedule_sessions;

-- Verifikasi struktur
DESCRIBE robot_settings;
```

**CATATAN:** Jika kolom sudah ada, query akan skip (IF NOT EXISTS).

---

## PERUBAHAN 3.5: Update functions.php - Resume Logic

**File:** `includes/functions.php`  
**Lokasi:** Tambahkan function baru di bagian bawah file

**TAMBAHKAN:**
```php
// ================================================================
// RESUME BEHAVIOR FUNCTIONS
// ================================================================

/**
 * Get resume status and info for a user
 * 
 * @param int $userId User ID
 * @return array Resume status info
 */
function getResumeInfo($userId) {
    $pdo = getDBConnection();
    
    $stmt = $pdo->prepare("
        SELECT 
            resume_behavior,
            auto_pause_triggered,
            auto_pause_reason,
            auto_pause_time,
            schedule_mode,
            current_daily_pnl
        FROM robot_settings 
        WHERE user_id = ?
    ");
    $stmt->execute([$userId]);
    $settings = $stmt->fetch(PDO::FETCH_ASSOC);
    
    if (!$settings) {
        return ['error' => 'User not found'];
    }
    
    // Robot not paused
    if (!$settings['auto_pause_triggered']) {
        return [
            'is_paused' => false,
            'message' => 'Robot aktif'
        ];
    }
    
    $resumeBehavior = $settings['resume_behavior'] ?? 'next_day';
    $pauseTime = new DateTime($settings['auto_pause_time']);
    $now = new DateTime();
    
    $result = [
        'is_paused' => true,
        'behavior' => $resumeBehavior,
        'pause_time' => $settings['auto_pause_time'],
        'pause_reason' => $settings['auto_pause_reason']
    ];
    
    switch ($resumeBehavior) {
        case 'next_session':
            $result['message'] = 'Robot akan aktif di sesi trading berikutnya';
            $result['can_auto_resume'] = true;
            break;
            
        case 'next_day':
            $isNewDay = $now->format('Y-m-d') > $pauseTime->format('Y-m-d');
            if ($isNewDay) {
                // Auto-reset for new day
                resetDailyPnL($userId);
                resumeRobotAuto($userId);
                return [
                    'is_paused' => false,
                    'message' => 'Robot aktif (hari baru, PnL reset)'
                ];
            }
            $result['message'] = 'Robot akan aktif besok (Daily Reset)';
            $result['resume_time'] = 'Tomorrow 00:00';
            break;
            
        case 'manual_only':
            $result['message'] = 'Robot OFF - Klik RESUME untuk mengaktifkan';
            $result['can_auto_resume'] = false;
            break;
    }
    
    return $result;
}

/**
 * Manually resume robot
 * 
 * @param int $userId User ID
 * @param bool $resetPnL Whether to reset daily PnL
 * @return bool Success status
 */
function resumeRobotManual($userId, $resetPnL = false) {
    $pdo = getDBConnection();
    
    $sql = "UPDATE robot_settings SET
                auto_pause_triggered = 0,
                auto_pause_reason = NULL,
                auto_pause_time = NULL";
    
    if ($resetPnL) {
        $sql .= ", current_daily_pnl = 0";
    }
    
    $sql .= " WHERE user_id = ?";
    
    $stmt = $pdo->prepare($sql);
    $result = $stmt->execute([$userId]);
    
    if ($result) {
        logActivity($userId, 'robot_resume_manual', 'Robot manually resumed' . ($resetPnL ? ' with PnL reset' : ''));
    }
    
    return $result;
}

/**
 * Auto resume robot (called by system)
 */
function resumeRobotAuto($userId) {
    $pdo = getDBConnection();
    
    $stmt = $pdo->prepare("
        UPDATE robot_settings SET
            auto_pause_triggered = 0,
            auto_pause_reason = NULL,
            auto_pause_time = NULL
        WHERE user_id = ?
    ");
    $stmt->execute([$userId]);
    
    logActivity($userId, 'robot_resume_auto', 'Robot auto-resumed');
    
    return true;
}

/**
 * Reset daily PnL (called on new day)
 */
function resetDailyPnL($userId) {
    $pdo = getDBConnection();
    
    $stmt = $pdo->prepare("
        UPDATE robot_settings SET
            current_daily_pnl = 0,
            trades_today = 0
        WHERE user_id = ?
    ");
    $stmt->execute([$userId]);
    
    logActivity($userId, 'daily_pnl_reset', 'Daily PnL reset for new day');
    
    return true;
}
```

---

# üü° FASE 4: AUTO-PAUSE MODAL & FINISHING (5 Perubahan)

## PERUBAHAN 4.1: Tambah Auto-Pause Modal di Dashboard

**File:** `dashboard.php`  
**Lokasi:** SEBELUM `</body>`

**TAMBAHKAN:**
```html
<!-- ========== AUTO-PAUSE NOTIFICATION MODAL ========== -->

<!-- Take Profit Modal -->
<div class="modal fade" id="autoPauseModal" tabindex="-1" data-bs-backdrop="static">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content bg-dark border-success">
            <div class="modal-header border-success bg-success bg-opacity-25">
                <h5 class="modal-title text-success">
                    <i class="fas fa-trophy me-2"></i>
                    Target Tercapai!
                </h5>
            </div>
            <div class="modal-body text-center py-4">
                <div class="mb-3">
                    <i class="fas fa-trophy text-warning" style="font-size: 4rem;"></i>
                </div>
                
                <h4 class="text-light mb-3" id="autoPauseMessage">
                    üéØ Take Profit Harian Tercapai!
                </h4>
                
                <div class="card bg-success bg-opacity-10 border-success mb-3">
                    <div class="card-body py-3">
                        <div class="row text-center">
                            <div class="col-6 border-end border-secondary">
                                <small class="text-muted d-block mb-1">Target</small>
                                <span class="text-success fs-4 fw-bold" id="autoPauseTarget">$50.00</span>
                            </div>
                            <div class="col-6">
                                <small class="text-muted d-block mb-1">Profit Hari Ini</small>
                                <span class="text-success fs-4 fw-bold" id="autoPauseActual">$52.40</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <p class="text-muted mb-0" id="autoPauseResumeInfo">
                    Robot akan aktif lagi besok dengan PnL reset
                </p>
            </div>
            <div class="modal-footer border-secondary justify-content-center gap-2">
                <button type="button" class="btn btn-outline-primary" onclick="resumeRobotNow()">
                    <i class="fas fa-play me-1"></i>Resume Sekarang
                </button>
                <button type="button" class="btn btn-success" data-bs-dismiss="modal">
                    <i class="fas fa-check me-1"></i>OK, Terima Kasih!
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Max Loss Modal -->
<div class="modal fade" id="maxLossModal" tabindex="-1" data-bs-backdrop="static">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content bg-dark border-danger">
            <div class="modal-header border-danger bg-danger bg-opacity-25">
                <h5 class="modal-title text-danger">
                    <i class="fas fa-shield-alt me-2"></i>
                    Proteksi Saldo Aktif
                </h5>
            </div>
            <div class="modal-body text-center py-4">
                <div class="mb-3">
                    <i class="fas fa-hand-paper text-danger" style="font-size: 4rem;"></i>
                </div>
                
                <h4 class="text-light mb-3">
                    ‚ö†Ô∏è Max Loss Tercapai
                </h4>
                
                <p class="text-muted">
                    Robot dihentikan otomatis untuk melindungi saldo Anda dari kerugian lebih lanjut.
                </p>
                
                <div class="card bg-danger bg-opacity-10 border-danger mb-3">
                    <div class="card-body py-3">
                        <div class="row text-center">
                            <div class="col-6 border-end border-secondary">
                                <small class="text-muted d-block mb-1">Batas Loss</small>
                                <span class="text-danger fs-4 fw-bold" id="maxLossLimit">-$25.00</span>
                            </div>
                            <div class="col-6">
                                <small class="text-muted d-block mb-1">Loss Hari Ini</small>
                                <span class="text-danger fs-4 fw-bold" id="maxLossActual">-$26.50</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="alert alert-warning bg-warning bg-opacity-10 border-warning py-2 mb-0">
                    <small>
                        <i class="fas fa-lightbulb me-1"></i>
                        Tips: Evaluasi strategi dan kondisi market sebelum melanjutkan trading
                    </small>
                </div>
            </div>
            <div class="modal-footer border-secondary justify-content-center">
                <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">
                    <i class="fas fa-times me-1"></i>Tutup
                </button>
            </div>
        </div>
    </div>
</div>
```

---

## PERUBAHAN 4.2: Tambah JavaScript untuk Auto-Pause Check

**File:** `dashboard.php`  
**Lokasi:** Di dalam tag `<script>` atau sebelum `</body>`

**TAMBAHKAN:**
```javascript
<script>
// ================================================================
// AUTO-PAUSE NOTIFICATION SYSTEM
// ================================================================

/**
 * Check auto-pause status periodically
 */
function checkAutoPauseStatus() {
    fetch('/api/check-autopause.php?user_id=<?php echo $_SESSION["user_id"] ?? 0; ?>')
        .then(response => response.json())
        .then(data => {
            if (data.should_show_modal && !isModalAlreadyShown(data.pause_id)) {
                showAutoPauseNotification(data);
                markModalShown(data.pause_id);
            }
        })
        .catch(error => console.error('Auto-pause check error:', error));
}

/**
 * Show appropriate modal based on pause reason
 */
function showAutoPauseNotification(data) {
    if (data.reason === 'tp_reached' || data.reason === 'take_profit') {
        // Update Take Profit modal content
        document.getElementById('autoPauseTarget').textContent = '$' + parseFloat(data.target).toFixed(2);
        document.getElementById('autoPauseActual').textContent = '$' + parseFloat(data.actual).toFixed(2);
        document.getElementById('autoPauseResumeInfo').textContent = getResumeMessage(data.resume_behavior);
        
        // Show modal
        const modal = new bootstrap.Modal(document.getElementById('autoPauseModal'));
        modal.show();
        
    } else if (data.reason === 'ml_reached' || data.reason === 'max_loss') {
        // Update Max Loss modal content
        document.getElementById('maxLossLimit').textContent = '-$' + Math.abs(parseFloat(data.limit)).toFixed(2);
        document.getElementById('maxLossActual').textContent = '-$' + Math.abs(parseFloat(data.actual)).toFixed(2);
        
        // Show modal
        const modal = new bootstrap.Modal(document.getElementById('maxLossModal'));
        modal.show();
    }
}

/**
 * Get human-readable resume message
 */
function getResumeMessage(behavior) {
    const messages = {
        'next_session': 'üîÑ Robot akan aktif di sesi trading berikutnya',
        'next_day': '‚≠ê Robot akan aktif besok dengan PnL reset',
        'manual_only': 'üîí Robot OFF sampai Anda klik Resume manual'
    };
    return messages[behavior] || 'Robot dalam mode pause';
}

/**
 * Resume robot immediately
 */
function resumeRobotNow() {
    if (!confirm('Resume robot sekarang?\n\nTarget harian akan tetap sama (tidak reset).')) {
        return;
    }
    
    fetch('/api/robot-status.php', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
            action: 'resume',
            user_id: <?php echo $_SESSION['user_id'] ?? 0; ?>
        })
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            // Close modal
            const modal = bootstrap.Modal.getInstance(document.getElementById('autoPauseModal'));
            if (modal) modal.hide();
            
            // Refresh page or show success
            alert('‚úÖ Robot berhasil di-resume!');
            location.reload();
        } else {
            alert('‚ùå Gagal resume: ' + (data.error || 'Unknown error'));
        }
    })
    .catch(error => alert('‚ùå Error: ' + error.message));
}

/**
 * Session storage to prevent duplicate modals
 */
function isModalAlreadyShown(pauseId) {
    return sessionStorage.getItem('autopause_shown_' + pauseId) === 'true';
}

function markModalShown(pauseId) {
    sessionStorage.setItem('autopause_shown_' + pauseId, 'true');
}

// ================================================================
// INITIALIZATION
// ================================================================

// Check auto-pause every 30 seconds
setInterval(checkAutoPauseStatus, 30000);

// Initial check after page load (2 second delay)
document.addEventListener('DOMContentLoaded', function() {
    setTimeout(checkAutoPauseStatus, 2000);
});
</script>
```

---

## PERUBAHAN 4.3: Update API check-autopause.php

**File:** `api/check-autopause.php`  
**Lokasi:** Update seluruh file

**GANTI/UPDATE menjadi:**
```php
<?php
/**
 * API: Check Auto-Pause Status
 * Returns detailed info for dashboard modal notifications
 */

header('Content-Type: application/json');
header('Access-Control-Allow-Origin: *');

require_once __DIR__ . '/../includes/config.php';
require_once __DIR__ . '/../includes/functions.php';

// Get user ID from request
$userId = isset($_GET['user_id']) ? intval($_GET['user_id']) : 0;

if ($userId <= 0) {
    echo json_encode(['error' => 'Invalid user_id', 'should_show_modal' => false]);
    exit;
}

try {
    $pdo = getDBConnection();
    
    $stmt = $pdo->prepare("
        SELECT 
            take_profit_target,
            max_loss_limit,
            current_daily_pnl,
            auto_pause_triggered,
            auto_pause_reason,
            auto_pause_time,
            resume_behavior,
            robot_enabled
        FROM robot_settings
        WHERE user_id = ?
    ");
    $stmt->execute([$userId]);
    $settings = $stmt->fetch(PDO::FETCH_ASSOC);
    
    if (!$settings) {
        echo json_encode(['error' => 'User not found', 'should_show_modal' => false]);
        exit;
    }
    
    // Base response
    $response = [
        'robot_enabled' => (bool)$settings['robot_enabled'],
        'is_paused' => (bool)$settings['auto_pause_triggered'],
        'should_show_modal' => false,
        'current_pnl' => floatval($settings['current_daily_pnl']),
        'resume_behavior' => $settings['resume_behavior'] ?? 'next_day'
    ];
    
    // If paused, provide modal data
    if ($settings['auto_pause_triggered']) {
        $pauseId = md5($settings['auto_pause_time'] . $userId);
        
        $response['should_show_modal'] = true;
        $response['pause_id'] = $pauseId;
        $response['reason'] = $settings['auto_pause_reason'];
        $response['pause_time'] = $settings['auto_pause_time'];
        
        // Data based on reason
        if (in_array($settings['auto_pause_reason'], ['tp_reached', 'take_profit'])) {
            $response['target'] = floatval($settings['take_profit_target']);
            $response['actual'] = floatval($settings['current_daily_pnl']);
        } else {
            $response['limit'] = floatval($settings['max_loss_limit']);
            $response['actual'] = floatval($settings['current_daily_pnl']);
        }
    }
    
    echo json_encode($response);
    
} catch (Exception $e) {
    echo json_encode([
        'error' => $e->getMessage(),
        'should_show_modal' => false
    ]);
}
```

---

## PERUBAHAN 4.4: Sinkronisasi settings.php

**File:** `settings.php`  
**PASTIKAN:** settings.php juga punya UI schedule dan menyimpan data yang sama

**COPY struktur dari admin/my-robot.php:**
- Array $scheduleModes (5 mode)
- UI untuk Custom Single, Multi-Session, Per-Day
- JavaScript functions
- POST handler yang sama

**ATAU:** Redirect user ke admin/my-robot.php untuk pengaturan robot (lebih simpel)

---

## PERUBAHAN 4.5: Tambah CSS untuk Schedule UI

**File:** `assets/css/style.css` atau `assets/css/dashboard.css`  
**Lokasi:** Tambahkan di akhir file

**TAMBAHKAN:**
```css
/* ================================================================
   SCHEDULE UI STYLING - ZYN TRADE SYSTEM
   ================================================================ */

/* Animation for schedule UI panels */
.schedule-ui {
    animation: fadeSlideIn 0.3s ease-out;
}

@keyframes fadeSlideIn {
    from {
        opacity: 0;
        transform: translateY(-10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Session item hover effect */
.schedule-ui .d-flex:hover {
    background: rgba(0, 168, 204, 0.15) !important;
    transition: background 0.2s ease;
}

/* Time input styling */
.schedule-ui input[type="time"] {
    border: 1px solid rgba(255, 255, 255, 0.1);
    transition: all 0.2s ease;
}

.schedule-ui input[type="time"]:focus {
    border-color: var(--bs-primary);
    box-shadow: 0 0 0 3px rgba(0, 168, 204, 0.25);
}

/* Badge styling in schedule */
.schedule-ui .badge {
    min-width: 65px;
    font-weight: 500;
}

/* Per-day row styling */
.schedule-ui .form-check-input:checked + label,
.schedule-ui .form-check-input:checked ~ * {
    opacity: 1;
}

.schedule-ui .form-check-input:not(:checked) ~ input[type="time"] {
    opacity: 0.5;
}

/* Auto-pause modal styling */
#autoPauseModal .modal-content,
#maxLossModal .modal-content {
    backdrop-filter: blur(10px);
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
}

/* Trophy animation */
#autoPauseModal .fa-trophy {
    animation: bounce 1s ease infinite;
}

@keyframes bounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
}

/* Resume behavior cards */
.resume-behavior-card {
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.resume-behavior-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
}
```

---

# ‚úÖ CHECKLIST VERIFIKASI FINAL

Setelah semua perubahan selesai, verifikasi:

## UI Schedule Mode
- [ ] Buka `settings.php` ‚Üí Harus ada 5 mode schedule
- [ ] Buka `admin/my-robot.php` ‚Üí Dropdown harus ada 5 opsi
- [ ] Pilih "Custom Single" ‚Üí Form jam mulai/selesai muncul
- [ ] Pilih "Multi-Sesi" ‚Üí Bisa tambah/hapus sesi
- [ ] Pilih "Per Hari" ‚Üí Form 5 hari muncul, "Copy Senin" berfungsi

## Backend & Database
- [ ] Submit form ‚Üí Data tersimpan tanpa error
- [ ] Cek database ‚Üí Kolom `resume_behavior`, `schedule_sessions`, `schedule_per_day` ada
- [ ] Data JSON tersimpan dengan benar

## Resume Behavior
- [ ] Dropdown Resume Behavior muncul dengan 3 opsi
- [ ] Penjelasan 3 opsi jelas terlihat

## Auto-Pause Modal
- [ ] Trigger auto-pause (set TP rendah untuk test)
- [ ] Modal muncul dengan info yang benar
- [ ] Tombol "Resume Sekarang" berfungsi
- [ ] Modal Max Loss muncul dengan styling merah

---

# üéâ SELESAI!

Setelah semua perubahan di atas selesai:

**Website ZYN Trade System = 100% sesuai PLAN FINAL v3.0**

Fitur yang sudah lengkap:
1. ‚úÖ 5 Mode Schedule (dengan UI lengkap)
2. ‚úÖ Multi-Session Manager (add/remove sesi)
3. ‚úÖ Per-Day Schedule (Senin-Jumat berbeda)
4. ‚úÖ Resume Behavior (3 opsi)
5. ‚úÖ Auto-Pause Modal Notification
6. ‚úÖ Backend handler untuk semua data baru

**Total: 20 perubahan dalam 4 fase**
**Estimasi waktu: 2-3 jam**
